#!/usr/bin/env python3
import sys
import argparse

try:
	from sccm import *
except ModuleNotFoundError:
	import sys
	sys.path.append('../') #for debugging ./sccm
	from sccm import *

parser = argparse.ArgumentParser(description='run a simulation')
parser.add_argument('-i', action='store', dest='filename', help='input parameter file', default=None)
parser.add_argument('-o', action='store', dest='outnameprefix', help='output prefix',default='')

args = parser.parse_args()

def run():
	p = Parameters()  # load default parameters
	if args.filename is not None:
		p.load(args.filename)
	model = PaperModel(p)
	model.run()
	if args.outnameprefix != '':
		args.outnameprefix += '_'
	model.save_results(args.outnameprefix)

if __name__ == "__main__":
	run()
